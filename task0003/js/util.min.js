(function(){"use strict";var util=function(selector){if(!selector){return null}var context=document;var bracketNameReg=/^\[[\w\d-_]+\]$/;var bracketValReg=/^\[[\w\d-_]+\=[\d\w-_\"\']+\]$/;var tagReg=/^[\w]+$/;if(false){return document.querySelector(selector)}else{var arr=util.trim(selector).split(/\s+/).reverse();var arrLen=arr.length;var i=0;var j=1;var firstRound=utilSelector(arr[0],context);if(!firstRound[0]){return null}if(arrLen===1){return firstRound[0]}while(firstRound.length){context=firstRound[0];for(;j<arrLen;j++){if((context=utilSelector(arr[j],context))===null){firstRound.shift();break}}if(j===arrLen){return firstRound[0]}}return null}function utilSelector(selector,context){var elms=[];var judAttr=function(selector,bracketNameReg,bracketValReg){if(selector.charAt(0)==="."){selector=selector.substring(1);return function(elm){return elm.className?elm.className.indexOf(selector)>=0:false}}if(bracketNameReg.test(selector)){selector=selector.substring(1,selector.length-1);return function(elm){return elm.getAttribute(selector)}}else{if(bracketValReg.test(selector)){selector=selector.substring(1,selector.length-1);var attrValue=selector.substring(selector.indexOf("=")+1);selector=selector.substring(0,selector.indexOf("="));return function(elm){return elm.getAttribute(selector)===attrValue}}}return function(){return false}}(selector,bracketNameReg,bracketValReg);if(context===document){if(selector.charAt(0)==="#"){elms.push(document.getElementById(selector.substring(1)));return elms}if(tagReg.test(selector)){return Array.prototype.slice.call(document.getElementsByTagName(selector))}var allDom=document.getElementsByTagName("*");var allDomLen=allDom.length;for(var k=0;k<allDomLen;k++){if(judAttr(allDom[k])){elms.push(allDom[k])}}return elms}else{if(selector.charAt(0)==="#"){selector=selector.substring(1);while(context=context.parentNode){if(selector===context.id){return context}}return null}if(tagReg.test(selector)){while(context=context.parentNode){if(context===document){return null}if(selector.toUpperCase()===context.tagName.toUpperCase()){return context}}return null}while(context=context.parentNode){if(context===document){return null}if(judAttr(context)){return context}}return null}}};util.isArray=function(arr){return Object.prototype.toString.call(arr).slice(8,-1)==="Array"},util.isFunction=function(fn){return Object.prototype.toString.call(fn).slice(8,-1)==="Function"},util.getType=function(src){return Object.prototype.toString.call(src).slice(8,-1)},util.utilcloneObject=function(obj){if(src===null){return null}if(src===undefined){return undefined}var key;var result;var srcClass=util.getType(src);if(srcClass==="Object"){result={}}else{if(srcClass==="Array"){result=[]}else{if(srcClass==="Date"){return new Date(+src)}else{if(srcClass==="Number"||srcClass==="String"||srcClass==="Boolean"){return src}}}}for(key in src){var attr=src[key];if(util.getType(attr)==="Object"){result[key]=arguments.callee(attr)}else{if(util.getType(attr)==="Array"){result[key]=arguments.callee(attr)}else{result[key]=src[key]}}}return result},util.uniqArray=function(arr){var result=[];var judObj={};for(var i=0,len=arr.length;i<len;i++){var item=arr[i];if(!judObj[item]){result.push(item);judObj[item]=true}}return result};util.trim=function(str){if(str===null){return null}if(str===undefined){return undefined}return str.replace(/(^[\s\uFEFF\xA0]+)|([\s\uFEFF\xA0]+$)/g,"")};util.each=function(arr,fn){for(var i=0,len=arr.length;i<len;i++){fn.call(arr[i],arr[i],i)}};util.getObjectLength=function(){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty;var hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString");var dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var dontEnumsLength=dontEnums.length;return function(obj){if(typeof obj!=="object"&&(typeof obj!=="function"||obj===null)){throw new TypeError("getObjectLength called on non-object")}var result=[];var prop;var i;for(prop in obj){if(hasOwnProperty.call(obj,prop)){result.push(prop)}}if(hasDontEnumBug){for(i=0;i<dontEnumsLength;i++){if(hasOwnProperty.call(obj,dontEnums[i])){result.push(dontEnums[i])}}}return result.length}}();util.isEmail=function(emailStr){var mailReg=/^([\w\d])+\@([\w\d])+(\.([\w\d]{2,4}))+$/;return mailReg.test(emailStr)};util.isMobilePhone=function(phone){var phoneReg=/^(\d{3,5}\-)?(\d{8,11})(\-\d{3,5})?$/;return phoneReg.test(phone)};util.htmlEscape=function(text){return text.replace(/[<>\/"&']/g,function(match,position){switch(match){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;";case"'":return"&apos;";case"/":return"&#x2F;"}})};util.htmlReturn=function(text){return text.replace(/(&lt;|&gt;|&amp;|&quot;|&apos;|&#x2F;)/g,function(match,position){switch(match){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&quot;":return'"';case"&apos;":return"'";case"&#x2F;":return"/"}})};util.isIE=function(){return/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp["$1"]:-1};util.isValidCookieName=function(cookieName){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(cookieName)};util.setCookie=function(cookieName,cookieValue,expiredays){if(!cookieName||!util.isValidCookieName(cookieName)){return}cookieValue=cookieValue||"";expiredays=expiredays||30;var date=new Date;date.setDate(date.getDate()+expiredays);document.cookie=cookieName+"="+encodeURIComponent(cookieValue)+";expires="+date.toUTCString()};util.getCookie=function(cookieName){if(!cookieName||!util.isValidCookieName(cookieName)){return}var nameStart=document.cookie.indexOf(cookieName+"=");if(nameStart>=0){nameStart=nameStart+cookieName.length+1;var nameEnd=document.cookie.indexOf(";",nameStart);if(nameEnd===-1){nameEnd=document.cookie.length}return decodeURLComponent(document.cookie.substring(nameStart,nameEnd))}return""};util.ajax=function(url,options){var getXMLRequest=function(){if(typeof XMLHttpRequest!==undefined){return function(){return new XMLHttpRequest}}else{return function(){var xmlhttp=null;var versions=["MSXML2.XMLHttp2.0","MSXML2.XMLHttp3.0","MSXML2.XMLHttp4.0","MSXML2.XMLHttp5.0","MSXML2.XMLHttp6.0","MSXML2.XMLHttp","Miscrosoft.XMLHTTP"];for(var i=0;i<versions.length;i++){try{xmlhttp=new ActiveXObject(versions[i]);return xmlhttp}catch(ex){continue}}return null}}}();var xhr=getXMLRequest();options=options||{};var type=options.type||"GET";var data=options.data||{};xhr.onreadystatechange=function(){if(xhr.readyState===4&&xhr.status===200){if(options.onsuccess){options.onsuccess(xhr.responseText,xhr)}}else{if(xhr.readyState===4&&xhr.status===404){if(options.onfail){options.onfail(xhr.responseText,xhr)}}}};if(type.toUpperCase()==="GET"){var str="?";for(var i in options.data){var obj=options.data[i];str+=i+"=";if(util.getType(obj)==="Object"){str+=getAttr(obj)+"&"}else{str+=obj+"&"}}str=str.substring(0,str.length-1);xhr.open("GET",url+str,true);xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.send(null)}else{var str="";for(var i in options.data){var obj=options.data[i];str+=i+"=";if(util.getType(obj)==="Object"){str+=getAttr(obj)+"&"}else{str+=obj+"&"}}str=str.substring(0,str.length-1);xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.open("POST",url,true);xhr.send(str)}function getAttr(obj){var str="{";var type=util.getType(obj);if(type!=="Object"){return obj}for(var i in obj){str+=i+":";if(util.getType(obj[i])==="Object"){str+="{";str+=arguments.callee(obj[i]);str+="},"}else{str+=obj[i]+","}}str=str.substring(0,str.length-1)+"}";return str}};util.hasClass=function(element,className){if(!className||!element||!element.className){return false}var classNames=element.className.split(/\s+/);for(var i=0,len=classNames.length;i<len;i++){if(classNames[i]===className){return true}}return false};util.addClass=function(element,newClassName){if(!newClassName||!element){return}if(!element.className){element.className=newClassName}else{if(!util.hasClass(element,newClassName)){element.className=[element.className,newClassName].join(" ")}}};util.removeClass=function(element,oldClassName){if(!oldClassName||!element||!element.className){return}if(oldClassName==="*"){return element.className=""}var classNames=element.className.split(/\s+/);for(var i=0,len=classNames.length;i<len;i++){if(classNames[i]===oldClassName){classNames.splice(i,1)}}element.className=classNames.join(" ")};util.toggleClass=function(element,className){if(util.hasClass(element,className)){util.removeClass(element,className)}else{util.addClass(element,className)}};util.isSiblingNode=function(element,siblingNode){if(!siblingNode||!element){return false}return element.parentNode===siblingNode.parentNode};util.getPosition=function(element){if(!element){return undefined}var box=element.getBoundingClientRect();return box};util.getDomChildren=function(el){var children=[];for(var i=el.children.length;i--;){if(el.children[i].nodeType!==8){children.unshift(el.children[i])}}return children};util.addEvent=function(element,event,listener){if(!listener||!event||!element){return}element[event+"Events"]=element[event+"Events"]||[];var _listener;if(element.addEventListener){_listener=listener;element[event+"Events"].push({raw:listener,wrap:_listener});element.addEventListener(event,_listener,false)}else{if(element.attachEvent){_listener=function(){listener.call(element)};element[event+"Events"].push({raw:listener,wrap:_listener});element.attachEvent("on"+event,_listener)}}};util.removeEvent=function(element,event,listener){if(!event||!element){return}if(element.removeEventListener){if(!listener){for(var i=0;i<element[event+"Events"].length;i++){element.removeEventListener(event,element[event+"Events"][i].wrap,false)}return}if(!element[event+"Events"]){element.removeEventListener(event,listener,false)}else{element.removeEventListener(event,util.findWrapEvent(element,event,listener),false)}}else{if(element.detachEvent){if(!listener){for(var i=0;i<element[event+"Events"].length;i++){element.detachEvent("on"+event,element[event+"Events"][i].wrap)}return}if(!element[event+"Events"]){element.detachEvent("on"+event,listener)}else{element.detachEvent("on"+event,util.findWrapEvent(element,event,listener))}}}};util.addClickEvent=function(element,listener){if(!listener||!element){return}util.addEvent(element,"click",listener)};util.addEnterEvent=function(element,listener){if(!listener||!element){return}var _listener=function(event){event=event||window.event;var keyCode=event.which||event.keyCode;if(keyCode===13){listener.call(element,event)}};util.addEvent(element,"keyup",_listener)};util.delegateEvent=function(element,tag,event,listener){if(!listener||!event||!tag||!element){return}var _listener=function(event){event=event||window.event;var target=event.target||event.srcElement;if(target.tagName===tag.toUpperCase()||tag==="*"){listener.call(target,event)}};util.addEvent(element,event,_listener)};util.findWrapEvent=function(element,event,raw){var i=0;for(;i<element[event+"Events"].length;i++){if(element[event+"Events"][i].raw.toString()===raw.toString()){return element[event+"Events"][i].wrap}}return null};util.on=function(selector,event,listener){return util.addEvent(util(selector),event,listener)};util.click=function(selector,listener){return util.addClickEvent(util(selector),listener)};util.un=function(selector,event,listener){return util.removeEvent(util(selector),event,listener)};util.delegate=function(selector,tag,event,listener){return util.delegateEvent(util(selector),tag,event,listener)};if(typeof define==="function"&&define.amd){define(function(){return util})}else{window.util=util}})();